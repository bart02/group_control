Адаптивный полет с грузом (финальное задание)
==================================

### Описание (основные отличия)

В рамках дисциплины «Адаптивный полет с грузом» задача Команды разработать и запрограммировать алгоритм управления, позволяющий группе беспилотных летательных аппаратов пролететь по маршруту и сбросить грузы наиболее близко к заданным точкам за минимальное время.

Полет по маршруту начинается при пересечении первым аппаратом стартовой плоскости и заканчивается при пересечении последним аппаратом финишной плоскости. При полете по маршруту требуется движение центра масс группы по траектории и разлет группы (среднеквадратичное отклонение аппаратов от центра масс) не более значения D.  Допустимая зона находится вокруг линии маршрута не дальше некоторого расстояния R от нее. Значение D, R и характеристики маршрута выдаются автоматически при запуске Симулятора.

Во время полета необходимо сбросить прикрепленные к аппаратам грузы в точки назначения. В каждую точку назначения, должен попасть один груз. Грузы идентичны, распределение грузов по точкам может быть произвольным.

Для Профессиональной Лиги координаты точек назначения выдаются автоматически при запуске Симулятора.
Для Экспертной Лиги координаты точек назначения выдаются при приближении хотя бы одного из аппаратов к ним на расстояние L. Значение L выдается автоматически при запуске Симулятора.

Баллы начисляются или снимаются за следующие действия:

* общее время полета по маршруту;
* среднеквадратичное отклонение траектории центра масс от маршрута;
* разлет группы превышающий допустимое значение;
* среднеквадратичное отклонение точки приземления груза от точки назначения;
* время нахождения аппарата вне допустимой зоны (Критический критерий, при высоких значениях параметра жюри может принять решение о признании результата недействительным).

В качестве центра масс понимается геометрический центр точек центров аппаратов.

### Запуск

Окружение для скачивания: cargo_2

Команда для запуска Симулятора выглядит следующим образом

```
./cargo_2.sh РЕЖИМ_ЛИГИ КОЛ_ВО
```

где РЕЖИМ_ЛИГИ может быть prof для Профессиональной или exp для Экспертной лиги,
КОЛ_ВО - общее количество аппаратов (по умолчанию 3).


#### Параметры

Количество аппаратов: 3

Параметры сплайна маршрута: координаты точек (широта, долгота, высота) `tasks/cargo/2/gps_spline.pts`, параметр t точек `tasks/cargo/2/spline_t.txt`

Начальная масса аппарата и масса груза: `tasks/cargo/2/mass.txt`

Допустимое расстояние R вокруг линии маршрута (метры): 10

Допустимый разлет группы D (среднеквадратичное отклонение аппаратов от центра масс) (метры): 5

Для Профессиональной лиги координаты точек сброса (широта, долгота, высота): `tasks/cargo/2/gps_droppoint.pts`.

Для Экспертной лиги расстояние до точки назначения L, при которой происходит выдача ее координат (метры): `tasks/cargo/2/range.txt`.

Для Экспертной лиги выдача координат точек назначения в ROS топике:

* `/cargo_drop/point`

Формат строки публикуемой в топик, значения разделены пробелами:

```
ВРЕМЯ_СЕК ШИРОТА_1 ДОЛГОТА_1 ВЫСОТА_1 ШИРОТА_2 ДОЛГОТА_2 ВЫСОТА_2 ... ШИРОТА_N ДОЛГОТА_N ВЫСОТА_N
```

где ВРЕМЯ_СЕК - время выдачи, в секундах, ШИРОТА_N ДОЛГОТА_N ВЫСОТА_N - глобальные координаты N точки назначения.

### Замечание

Со стандартными коэффициентами ПИД регуляторов аппараты могут не взлетать с грузом или взлетать не стабильно.
Их можно менять через параметры автопилота, так же возможно использовать другой тип управления.

### Замечание 2

Выложены файлы для запуска со следущими изменениями:

* изменена начальная масса аппарата и масса груза в `tasks/cargo/3/mass.txt`
* уменьшена скорость расхода топлива
* окружение для скачивания cargo_3
* команда для запуска ./cargo_3.sh

Остальные параметры остались без изменений.
